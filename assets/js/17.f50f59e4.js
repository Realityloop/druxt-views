(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{440:function(e,t,r){"use strict";r.r(t);r(26),r(180),r(425),r(426),r(96),r(427),r(329),r(181);var n=r(325),s=(r(99),r(61)),i=r(428),o=r.n(i),a=r(327),u=r(337),l=r(335),d={name:"DruxtView",mixins:[a.c],props:{displayId:{type:String,default:"default"},type:{type:String,default:"view--view"},uuid:{type:String,required:!0},viewId:{type:String,required:!0}},fetch:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.view){t.next=4;break}return t.next=3,e.getResource({type:e.type,id:e.uuid});case 3:e.view=t.sent;case 4:return t.next=6,e.getResults({viewId:e.viewId,displayId:e.displayId,query:Object(u.stringify)(e.query)});case 6:return e.resource=t.sent,t.next=9,a.c.fetch.call(e);case 9:case"end":return t.stop()}}),t)})))()},data:function(){var e=Object(u.parse)(Object(u.stringify)(this.$route.query));return{model:{filter:e.filter||{},page:parseInt(e.page)||null,sort:e.sort||null},resource:null,view:!1}},computed:{attachments_after:function(){var e=this;if(!(((this.view||{}).data||{}).attributes||{}).display)return!1;var t=this.view.data.attributes.display;return Object.keys(t).filter((function(r){return"attachment"===t[r].display_plugin&&"after"===t[r].display_options.attachment_position&&void 0!==t[r].display_options.displays[e.displayId]}))},attachments_before:function(){var e=this;if(!(((this.view||{}).data||{}).attributes||{}).display)return!1;var t=this.view.data.attributes.display;return Object.keys(t).filter((function(r){return"attachment"===t[r].display_plugin&&"before"===t[r].display_options.attachment_position&&void 0!==t[r].display_options.displays[e.displayId]}))},count:function(){return parseInt(((this.resource||{}).meta||{}).count)||0},display:function(){return!!(((this.view||{}).data||{}).attributes||{}).display&&("default"===this.display_id?this.view.data.attributes.display[this.display_id]:o()(this.view.data.attributes.display.default,this.view.data.attributes.display[this.displayId]))},filters:function(){return Object.values(((this.display||{}).display_options||{}).filters||{}).filter((function(e){return e.exposed}))},headers:function(){return this.display?this.display.display_options.header:[]},mode:function(){return!!this.display&&(!!this.display.display_options.row.type.includes("entity:")&&((this.display.display_options.row.options||{}).view_mode||"default"))},pager:function(){return((this.display||{}).display_options||{}).pager||!1},query:function(){var e={};return this.model.page&&(e.page=this.model.page),Object.entries(this.model.filter||{}).length&&(e["views-filter"]=this.model.filter),this.model.sort&&(e["views-sort[sort_by]"]=this.model.sort),e},results:function(){return(this.resource||{}).data||[]},showPager:function(){return this.pager.type&&"none"!==this.pager.type},showSorts:function(){return!(!((((this.display||{}).display_options||{}).exposed_form||{}).options||{}).expose_sort_order||!this.sorts.length)},sorts:function(){return Object.values(((this.display||{}).display_options||{}).sorts||{}).filter((function(e){return e.exposed}))}},watch:{"$route.query":function(e,t){var r=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(Object.entries(e).length){t.next=4;break}return r.model={filter:null,page:null,sort:null},t.next=4,r.$fetch;case 4:case"end":return t.stop()}}),t)})))()},displayId:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch();case 2:case"end":return t.stop()}}),t)})))()},query:function(e,t){var r=this;return Object(s.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.$fetch();case 2:case"end":return e.stop()}}),e)})))()},uuid:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$fetch();case 2:case"end":return t.stop()}}),t)})))()}},methods:Object(n.a)({onFiltersUpdate:function(){this.model.page=null,this.model.sort=null}},Object(l.a)({getResource:"druxt/getResource",getResults:"druxt/views/getResults"})),druxt:function(e){var t=e.vm;return{componentOptions:[[t.viewId,t.displayId]],propsData:{count:t.count,display:t.display,mode:t.mode,pager:t.pager,results:t.results,view:t.view}}}},p=r(40),c=Object(p.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return!e.$fetchState.pending&&e.view?r(e.wrapper.component,e._b({tag:"component"},"component",e.wrapper.propsData,!1),[r(e.component.is,e._b({tag:"component",scopedSlots:e._u([{key:"header",fn:function(){return e._l(e.headers,(function(t){return r("span",{key:t.id,domProps:{innerHTML:e._s(t.content.value)}})}))},proxy:!0},e.filters?{key:"filters",fn:function(t){return[r("DruxtViewsFilters",e._b({attrs:{filters:e.filters},on:{input:e.onFiltersUpdate},model:{value:e.model.filter,callback:function(t){e.$set(e.model,"filter",t)},expression:"model.filter"}},"DruxtViewsFilters",Object.assign({},e.display.display_options.exposed_form,t),!1))]}}:null,e.showSorts?{key:"sorts",fn:function(t){return[r("DruxtViewsSorts",e._b({attrs:{sorts:e.sorts},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}},"DruxtViewsSorts",Object.assign({},e.display.display_options.exposed_form,t),!1))]}}:null,e.attachments_before?{key:"attachments_before",fn:function(t){return e._l(e.attachments_before,(function(n){return r("DruxtView",e._b({key:n,attrs:{"display-id":n,type:e.type,uuid:e.uuid,"view-id":e.viewId}},"DruxtView",t,!1))}))}}:null,{key:"results",fn:function(t){return e._l(e.results,(function(n){return r("DruxtEntity",e._b({key:n.id},"DruxtEntity",Object.assign({},{type:n.type,uuid:n.id,mode:e.mode},t),!1))}))}},e.showPager?{key:"pager",fn:function(t){return[r("DruxtViewsPager",e._b({model:{value:e.model.page,callback:function(t){e.$set(e.model,"page",t)},expression:"model.page"}},"DruxtViewsPager",Object.assign({},{count:e.count},e.pager,{resource:e.resource},t),!1))]}}:null,e.attachments_after?{key:"attachments_after",fn:function(t){return e._l(e.attachments_after,(function(n){return r("DruxtView",e._b({key:n,attrs:{"display-id":n,type:e.type,uuid:e.uuid,"view-id":e.viewId}},"DruxtView",t,!1))}))}}:null],null,!0),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}},"component",e.component.propsData,!1),[e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),e._v(" "),[e._l(e.headers,(function(t){return r("span",{key:t.id,domProps:{innerHTML:e._s(t.content.value)}})})),e._v(" "),r("DruxtViewsFilters",e._b({attrs:{filters:e.filters},on:{input:e.onFiltersUpdate},model:{value:e.model.filter,callback:function(t){e.$set(e.model,"filter",t)},expression:"model.filter"}},"DruxtViewsFilters",e.display.display_options.exposed_form,!1)),e._v(" "),e.showSorts?r("DruxtViewsSorts",e._b({attrs:{sorts:e.sorts},model:{value:e.model.sort,callback:function(t){e.$set(e.model,"sort",t)},expression:"model.sort"}},"DruxtViewsSorts",e.display.display_options.exposed_form,!1)):e._e(),e._v(" "),e._l(e.results,(function(t){return r("DruxtEntity",e._b({key:t.id},"DruxtEntity",{type:t.type,uuid:t.id,mode:e.mode},!1))})),e._v(" "),e.showPager?r("DruxtViewsPager",e._b({model:{value:e.model.page,callback:function(t){e.$set(e.model,"page",t)},expression:"model.page"}},"DruxtViewsPager",Object.assign({},{count:e.count},e.pager,{resource:e.resource}),!1)):e._e()]],2)],1):e._e()}),[],!1,null,null,null);t.default=c.exports}}]);